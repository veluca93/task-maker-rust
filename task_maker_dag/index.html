<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DAG generation and resulting structures for `Execution`s and `File`s."><title>task_maker_dag - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="task_maker_dag" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../task_maker_dag/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../task_maker_dag/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate task_maker_dag</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.5.13</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">task_maker_dag</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/task_maker_dag/lib.rs.html#1-55">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>DAG generation and resulting structures for <a href="struct.Execution.html"><code>Execution</code></a>s and
<a href="struct.File.html"><code>File</code></a>s.</p>
<p>A DAG is a series of executions linked together in a non-cyclical way. Every execution has a
list of files as dependencies, when all of them are ready the execution can start. When an
execution is run inside a sandbox by a worker (under some <a href="struct.ExecutionLimits.html"><code>ExecutionLimits</code></a>)
it will produce some output files (including <code>stdout</code> and <code>stderr</code>). Those outputs can be used
as inputs for the next executions.</p>
<p>The sandbox should also be able to limit the available resources and measure the used ones, like
the execution time and the used memory.</p>
<p>When some events about the execution occur the client is notified via callbacks, the supported
ones are:</p>
<ul>
<li>the start of an execution;</li>
<li>the completion of an execution;</li>
<li>if an execution is skipped because a required file cannot be get (the execution which should
have generated it has failed);</li>
<li>a file has been generated.</li>
</ul>
<h2 id="example"><a href="#example">Example</a></h2>
<p>Creating a simple <a href="struct.Execution.html"><code>Execution</code></a> which will run <code>date</code> to get the current
time. That command will print to <code>stdout</code> the current date, we capture it by calling
<a href="struct.Execution.html#method.stdout"><code>stdout</code></a>. We also bound some callbacks to the DAG, one
for when the execution completes, and one for when the output is ready.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>task_maker_dag::{ExecutionDAG, Execution, ExecutionCommand};

<span class="kw">let </span><span class="kw-2">mut </span>dag = ExecutionDAG::new();
<span class="kw">let </span><span class="kw-2">mut </span>exec = Execution::new(<span class="string">&quot;Get the date&quot;</span>, ExecutionCommand::system(<span class="string">&quot;date&quot;</span>));
<span class="kw">let </span>exec_id = exec.uuid;
<span class="kw">let </span>output = exec.stdout();
dag.add_execution(exec);
dag.on_execution_done(<span class="kw-2">&amp;</span>exec_id, |result| <span class="prelude-val">Ok</span>(<span class="macro">println!</span>(<span class="string">&quot;Elapsed time: {} seconds&quot;</span>, result.resources.cpu_time)));
dag.get_file_content(<span class="kw-2">&amp;</span>output, <span class="number">1000</span>, |date| <span class="prelude-val">Ok</span>(<span class="macro">println!</span>(<span class="string">&quot;The date is: {}&quot;</span>, std::str::from_utf8(<span class="kw-2">&amp;</span>date).unwrap())));</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Execution.html" title="struct task_maker_dag::Execution">Execution</a></div><div class="desc docblock-short">An <a href="struct.Execution.html"><code>Execution</code></a> is a process that will be executed by a worker inside a
sandbox. The sandbox will limit the execution of the process (e.g. killing it after a time limit
occurs, or preventing it from reading/writing files).</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionCallbacks.html" title="struct task_maker_dag::ExecutionCallbacks">ExecutionCallbacks</a></div><div class="desc docblock-short">The callbacks to be called when an event of an execution occurs.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionDAG.html" title="struct task_maker_dag::ExecutionDAG">ExecutionDAG</a></div><div class="desc docblock-short">A computation DAG, this is not serializable because it contains the callbacks of the client.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionDAGCallbacks.html" title="struct task_maker_dag::ExecutionDAGCallbacks">ExecutionDAGCallbacks</a></div><div class="desc docblock-short">The set of callbacks of a DAG.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionDAGConfig.html" title="struct task_maker_dag::ExecutionDAGConfig">ExecutionDAGConfig</a></div><div class="desc docblock-short">Configuration setting of an <code>ExecutionDAG</code>, some of the values set here will be inherited in the
configuration of the executions added.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionDAGData.html" title="struct task_maker_dag::ExecutionDAGData">ExecutionDAGData</a></div><div class="desc docblock-short">Serializable part of the execution DAG: everything except the callbacks (which are not
serializable).</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionGroup.html" title="struct task_maker_dag::ExecutionGroup">ExecutionGroup</a></div><div class="desc docblock-short">A group of executions that have to be executed concurrently in the same worker. If any of the
executions crash, all the group is stopped. The executions inside the group can communicate
using FIFO pipes provided by the OS.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionInput.html" title="struct task_maker_dag::ExecutionInput">ExecutionInput</a></div><div class="desc docblock-short">An input file of an <a href="struct.Execution.html"><code>Execution</code></a>, can be marked as executable if it has
to be run inside the sandbox.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionLimits.html" title="struct task_maker_dag::ExecutionLimits">ExecutionLimits</a></div><div class="desc docblock-short">Limits on an <a href="struct.Execution.html"><code>Execution</code></a>. On some worker platforms some of the fields
may not be supported or may be less accurate.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionResourcesUsage.html" title="struct task_maker_dag::ExecutionResourcesUsage">ExecutionResourcesUsage</a></div><div class="desc docblock-short">Resources used during the execution, note that on some platform these values may not be
accurate.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionResult.html" title="struct task_maker_dag::ExecutionResult">ExecutionResult</a></div><div class="desc docblock-short">The result of an <a href="struct.Execution.html"><code>Execution</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ExecutionTag.html" title="struct task_maker_dag::ExecutionTag">ExecutionTag</a></div><div class="desc docblock-short">A tag on an <code>Execution</code>. Can be used to classify the executions into groups and refer to them,
for example for splitting the cache scopes.</div></li><li><div class="item-name"><a class="struct" href="struct.Fifo.html" title="struct task_maker_dag::Fifo">Fifo</a></div><div class="desc docblock-short">A First-in First-out channel for letting executions communicate inside an execution group. Each
Fifo is identified by an UUID which is unique inside the same <code>ExecutionGroup</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.File.html" title="struct task_maker_dag::File">File</a></div><div class="desc docblock-short">An handle to a file in the evaluation, this only tracks dependencies between executions.</div></li><li><div class="item-name"><a class="struct" href="struct.FileCallbacks.html" title="struct task_maker_dag::FileCallbacks">FileCallbacks</a></div><div class="desc docblock-short">The callbacks that will trigger when the file is ready.</div></li><li><div class="item-name"><a class="struct" href="struct.WriteToCallback.html" title="struct task_maker_dag::WriteToCallback">WriteToCallback</a></div><div class="desc docblock-short">Where to write the file to with some other information.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CacheMode.html" title="enum task_maker_dag::CacheMode">CacheMode</a></div><div class="desc docblock-short">The setting of the cache level.</div></li><li><div class="item-name"><a class="enum" href="enum.ExecutionCommand.html" title="enum task_maker_dag::ExecutionCommand">ExecutionCommand</a></div><div class="desc docblock-short">Command of an <a href="struct.Execution.html"><code>Execution</code></a> to execute.</div></li><li><div class="item-name"><a class="enum" href="enum.ExecutionStatus.html" title="enum task_maker_dag::ExecutionStatus">ExecutionStatus</a></div><div class="desc docblock-short">Status of a completed <a href="struct.Execution.html"><code>Execution</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.ProvidedFile.html" title="enum task_maker_dag::ProvidedFile">ProvidedFile</a></div><div class="desc docblock-short">A wrapper around a <code>File</code> provided by the client, this means that the client knows the
<code>FileStoreKey</code> and the path to that file if it’s local, or it’s content if it’s generated.</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.HIGH_PRIORITY.html" title="constant task_maker_dag::HIGH_PRIORITY">HIGH_PRIORITY</a></div><div class="desc docblock-short">DAG-priority of executions that should run very soon, independently of their DAG, for example
executions that became available after a previous execution finished, or retries.</div></li></ul><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2><ul class="item-table"><li><div class="item-name"><a class="static" href="static.FIFO_SANDBOX_DIR.html" title="static task_maker_dag::FIFO_SANDBOX_DIR">FIFO_SANDBOX_DIR</a></div><div class="desc docblock-short">Directory inside the sandbox where to place all the pipes of the group. This is used to allow
the sandbox bind-mount all the pipes with a single mount point, inside all the sandboxes of the
group.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.DagPriority.html" title="type task_maker_dag::DagPriority">DagPriority</a></div><div class="desc docblock-short">Type of the priority value of a DAG.</div></li><li><div class="item-name"><a class="type" href="type.ExecutionGroupUuid.html" title="type task_maker_dag::ExecutionGroupUuid">ExecutionGroupUuid</a></div><div class="desc docblock-short">The identifier of an execution group, it’s globally unique and it identifies a group during an
evaluation.</div></li><li><div class="item-name"><a class="type" href="type.ExecutionUuid.html" title="type task_maker_dag::ExecutionUuid">ExecutionUuid</a></div><div class="desc docblock-short">The identifier of an execution, it’s globally unique and it identifies an execution only during
a single evaluation.</div></li><li><div class="item-name"><a class="type" href="type.FifoUuid.html" title="type task_maker_dag::FifoUuid">FifoUuid</a></div><div class="desc docblock-short">The identifier of a Fifo pipe inside a group.</div></li><li><div class="item-name"><a class="type" href="type.FileUuid.html" title="type task_maker_dag::FileUuid">FileUuid</a></div><div class="desc docblock-short">The identifier of a file, it’s globally unique and it identifies a file
only during a single evaluation.</div></li><li><div class="item-name"><a class="type" href="type.GetContentCallback.html" title="type task_maker_dag::GetContentCallback">GetContentCallback</a></div><div class="desc docblock-short">Type of the callback called when a file is returned to the client.</div></li><li><div class="item-name"><a class="type" href="type.GetContentChunkedCallback.html" title="type task_maker_dag::GetContentChunkedCallback">GetContentChunkedCallback</a></div><div class="desc docblock-short">Type of the callback called with the chunks of a file when it’s ready.</div></li><li><div class="item-name"><a class="type" href="type.OnDoneCallback.html" title="type task_maker_dag::OnDoneCallback">OnDoneCallback</a></div><div class="desc docblock-short">Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> ends.</div></li><li><div class="item-name"><a class="type" href="type.OnSkipCallback.html" title="type task_maker_dag::OnSkipCallback">OnSkipCallback</a></div><div class="desc docblock-short">Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> is skipped.</div></li><li><div class="item-name"><a class="type" href="type.OnStartCallback.html" title="type task_maker_dag::OnStartCallback">OnStartCallback</a></div><div class="desc docblock-short">Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> starts.</div></li><li><div class="item-name"><a class="type" href="type.Priority.html" title="type task_maker_dag::Priority">Priority</a></div><div class="desc docblock-short">Type of the priority value of an <code>Execution</code>.</div></li><li><div class="item-name"><a class="type" href="type.WorkerUuid.html" title="type task_maker_dag::WorkerUuid">WorkerUuid</a></div><div class="desc docblock-short">The identifier of a worker, it’s globally unique and identifies the worker during a single
connection. It is used to associate the jobs to the workers which runs the executions. The
underlying executor may provide more information about a worker using this id.</div></li></ul></section></div></main></body></html>