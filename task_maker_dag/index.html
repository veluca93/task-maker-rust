<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DAG generation and resulting structures for `Execution`s and `File`s."><meta name="keywords" content="rust, rustlang, rust-lang, task_maker_dag"><title>task_maker_dag - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../task_maker_dag/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../task_maker_dag/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate task_maker_dag</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.5.5</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section><div id="sidebar-vars" data-name="task_maker_dag" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../task_maker_dag/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">task_maker_dag</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/task_maker_dag/lib.rs.html#1-55">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>DAG generation and resulting structures for <a href="struct.Execution.html"><code>Execution</code></a>s and
<a href="struct.File.html"><code>File</code></a>s.</p>
<p>A DAG is a series of executions linked together in a non-cyclical way. Every execution has a
list of files as dependencies, when all of them are ready the execution can start. When an
execution is run inside a sandbox by a worker (under some <a href="struct.ExecutionLimits.html"><code>ExecutionLimits</code></a>)
it will produce some output files (including <code>stdout</code> and <code>stderr</code>). Those outputs can be used
as inputs for the next executions.</p>
<p>The sandbox should also be able to limit the available resources and measure the used ones, like
the execution time and the used memory.</p>
<p>When some events about the execution occur the client is notified via callbacks, the supported
ones are:</p>
<ul>
<li>the start of an execution;</li>
<li>the completion of an execution;</li>
<li>if an execution is skipped because a required file cannot be get (the execution which should
have generated it has failed);</li>
<li>a file has been generated.</li>
</ul>
<h2 id="example"><a href="#example">Example</a></h2>
<p>Creating a simple <a href="struct.Execution.html"><code>Execution</code></a> which will run <code>date</code> to get the current
time. That command will print to <code>stdout</code> the current date, we capture it by calling
<a href="struct.Execution.html#method.stdout"><code>stdout</code></a>. We also bound some callbacks to the DAG, one
for when the execution completes, and one for when the output is ready.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">task_maker_dag</span>::{<span class="ident">ExecutionDAG</span>, <span class="ident">Execution</span>, <span class="ident">ExecutionCommand</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">dag</span> <span class="op">=</span> <span class="ident">ExecutionDAG::new</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">exec</span> <span class="op">=</span> <span class="ident">Execution::new</span>(<span class="string">&quot;Get the date&quot;</span>, <span class="ident">ExecutionCommand::system</span>(<span class="string">&quot;date&quot;</span>));
<span class="kw">let</span> <span class="ident">exec_id</span> <span class="op">=</span> <span class="ident">exec</span>.<span class="ident">uuid</span>;
<span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> <span class="ident">exec</span>.<span class="ident">stdout</span>();
<span class="ident">dag</span>.<span class="ident">add_execution</span>(<span class="ident">exec</span>);
<span class="ident">dag</span>.<span class="ident">on_execution_done</span>(<span class="kw-2">&amp;</span><span class="ident">exec_id</span>, <span class="op">|</span><span class="ident">result</span><span class="op">|</span> <span class="prelude-val">Ok</span>(<span class="macro">println!</span>(<span class="string">&quot;Elapsed time: {} seconds&quot;</span>, <span class="ident">result</span>.<span class="ident">resources</span>.<span class="ident">cpu_time</span>)));
<span class="ident">dag</span>.<span class="ident">get_file_content</span>(<span class="kw-2">&amp;</span><span class="ident">output</span>, <span class="number">1000</span>, <span class="op">|</span><span class="ident">date</span><span class="op">|</span> <span class="prelude-val">Ok</span>(<span class="macro">println!</span>(<span class="string">&quot;The date is: {}&quot;</span>, <span class="ident">std::str::from_utf8</span>(<span class="kw-2">&amp;</span><span class="ident">date</span>).<span class="ident">unwrap</span>())));</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Execution.html" title="task_maker_dag::Execution struct">Execution</a></div><div class="item-right docblock-short"><p>An <a href="struct.Execution.html"><code>Execution</code></a> is a process that will be executed by a worker inside a
sandbox. The sandbox will limit the execution of the process (e.g. killing it after a time limit
occurs, or preventing it from reading/writing files).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionCallbacks.html" title="task_maker_dag::ExecutionCallbacks struct">ExecutionCallbacks</a></div><div class="item-right docblock-short"><p>The callbacks to be called when an event of an execution occurs.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionDAG.html" title="task_maker_dag::ExecutionDAG struct">ExecutionDAG</a></div><div class="item-right docblock-short"><p>A computation DAG, this is not serializable because it contains the callbacks of the client.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionDAGCallbacks.html" title="task_maker_dag::ExecutionDAGCallbacks struct">ExecutionDAGCallbacks</a></div><div class="item-right docblock-short"><p>The set of callbacks of a DAG.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionDAGConfig.html" title="task_maker_dag::ExecutionDAGConfig struct">ExecutionDAGConfig</a></div><div class="item-right docblock-short"><p>Configuration setting of an <code>ExecutionDAG</code>, some of the values set here will be inherited in the
configuration of the executions added.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionDAGData.html" title="task_maker_dag::ExecutionDAGData struct">ExecutionDAGData</a></div><div class="item-right docblock-short"><p>Serializable part of the execution DAG: everything except the callbacks (which are not
serializable).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionGroup.html" title="task_maker_dag::ExecutionGroup struct">ExecutionGroup</a></div><div class="item-right docblock-short"><p>A group of executions that have to be executed concurrently in the same worker. If any of the
executions crash, all the group is stopped. The executions inside the group can communicate
using FIFO pipes provided by the OS.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionInput.html" title="task_maker_dag::ExecutionInput struct">ExecutionInput</a></div><div class="item-right docblock-short"><p>An input file of an <a href="struct.Execution.html"><code>Execution</code></a>, can be marked as executable if it has
to be run inside the sandbox.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionLimits.html" title="task_maker_dag::ExecutionLimits struct">ExecutionLimits</a></div><div class="item-right docblock-short"><p>Limits on an <a href="struct.Execution.html"><code>Execution</code></a>. On some worker platforms some of the fields
may not be supported or may be less accurate.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionResourcesUsage.html" title="task_maker_dag::ExecutionResourcesUsage struct">ExecutionResourcesUsage</a></div><div class="item-right docblock-short"><p>Resources used during the execution, note that on some platform these values may not be
accurate.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionResult.html" title="task_maker_dag::ExecutionResult struct">ExecutionResult</a></div><div class="item-right docblock-short"><p>The result of an <a href="struct.Execution.html"><code>Execution</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExecutionTag.html" title="task_maker_dag::ExecutionTag struct">ExecutionTag</a></div><div class="item-right docblock-short"><p>A tag on an <code>Execution</code>. Can be used to classify the executions into groups and refer to them,
for example for splitting the cache scopes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Fifo.html" title="task_maker_dag::Fifo struct">Fifo</a></div><div class="item-right docblock-short"><p>A First-in First-out channel for letting executions communicate inside an execution group. Each
Fifo is identified by an UUID which is unique inside the same <code>ExecutionGroup</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.File.html" title="task_maker_dag::File struct">File</a></div><div class="item-right docblock-short"><p>An handle to a file in the evaluation, this only tracks dependencies between executions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FileCallbacks.html" title="task_maker_dag::FileCallbacks struct">FileCallbacks</a></div><div class="item-right docblock-short"><p>The callbacks that will trigger when the file is ready.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.WriteToCallback.html" title="task_maker_dag::WriteToCallback struct">WriteToCallback</a></div><div class="item-right docblock-short"><p>Where to write the file to with some other information.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CacheMode.html" title="task_maker_dag::CacheMode enum">CacheMode</a></div><div class="item-right docblock-short"><p>The setting of the cache level.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ExecutionCommand.html" title="task_maker_dag::ExecutionCommand enum">ExecutionCommand</a></div><div class="item-right docblock-short"><p>Command of an <a href="struct.Execution.html"><code>Execution</code></a> to execute.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ExecutionStatus.html" title="task_maker_dag::ExecutionStatus enum">ExecutionStatus</a></div><div class="item-right docblock-short"><p>Status of a completed <a href="struct.Execution.html"><code>Execution</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ProvidedFile.html" title="task_maker_dag::ProvidedFile enum">ProvidedFile</a></div><div class="item-right docblock-short"><p>A wrapper around a <code>File</code> provided by the client, this means that the client knows the
<code>FileStoreKey</code> and the path to that file if it’s local, or it’s content if it’s generated.</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.HIGH_PRIORITY.html" title="task_maker_dag::HIGH_PRIORITY constant">HIGH_PRIORITY</a></div><div class="item-right docblock-short"><p>DAG-priority of executions that should run very soon, independently of their DAG, for example
executions that became available after a previous execution finished, or retries.</p>
</div></div></div><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="static" href="static.FIFO_SANDBOX_DIR.html" title="task_maker_dag::FIFO_SANDBOX_DIR static">FIFO_SANDBOX_DIR</a></div><div class="item-right docblock-short"><p>Directory inside the sandbox where to place all the pipes of the group. This is used to allow
the sandbox bind-mount all the pipes with a single mount point, inside all the sandboxes of the
group.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.DagPriority.html" title="task_maker_dag::DagPriority type">DagPriority</a></div><div class="item-right docblock-short"><p>Type of the priority value of a DAG.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ExecutionGroupUuid.html" title="task_maker_dag::ExecutionGroupUuid type">ExecutionGroupUuid</a></div><div class="item-right docblock-short"><p>The identifier of an execution group, it’s globally unique and it identifies a group during an
evaluation.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ExecutionUuid.html" title="task_maker_dag::ExecutionUuid type">ExecutionUuid</a></div><div class="item-right docblock-short"><p>The identifier of an execution, it’s globally unique and it identifies an execution only during
a single evaluation.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FifoUuid.html" title="task_maker_dag::FifoUuid type">FifoUuid</a></div><div class="item-right docblock-short"><p>The identifier of a Fifo pipe inside a group.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FileUuid.html" title="task_maker_dag::FileUuid type">FileUuid</a></div><div class="item-right docblock-short"><p>The identifier of a file, it’s globally unique and it identifies a file
only during a single evaluation.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.GetContentCallback.html" title="task_maker_dag::GetContentCallback type">GetContentCallback</a></div><div class="item-right docblock-short"><p>Type of the callback called when a file is returned to the client.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.OnDoneCallback.html" title="task_maker_dag::OnDoneCallback type">OnDoneCallback</a></div><div class="item-right docblock-short"><p>Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> ends.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.OnSkipCallback.html" title="task_maker_dag::OnSkipCallback type">OnSkipCallback</a></div><div class="item-right docblock-short"><p>Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> is skipped.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.OnStartCallback.html" title="task_maker_dag::OnStartCallback type">OnStartCallback</a></div><div class="item-right docblock-short"><p>Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> starts.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Priority.html" title="task_maker_dag::Priority type">Priority</a></div><div class="item-right docblock-short"><p>Type of the priority value of an <code>Execution</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.WorkerUuid.html" title="task_maker_dag::WorkerUuid type">WorkerUuid</a></div><div class="item-right docblock-short"><p>The identifier of a worker, it’s globally unique and identifies the worker during a single
connection. It is used to associate the jobs to the workers which runs the executions. The
underlying executor may provide more information about a worker using this id.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="task_maker_dag" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0 (fe5b13d68 2022-05-18)" ></div>
</body></html>